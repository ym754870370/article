## 缓存
![avatar](../IMG/cache.png)

### 缓存技术

1. Cookie
        
    优点： 对于传输部分少量不敏感数据，非常简明有效
    
    缺点： 容量小(4k)，不安全，需要指定作用域，不可以跨域调用

2. Web Storage
   
    优点： 容量较大(5M),localStorage可做持久化数据存储，支持时间通知机制，可以将数据更新的通知发送给坚挺着

    缺点： 本地存储数据都容易被篡改

3. indexDB
   
4. PWA(Service Worker)
   
    一个独立的线程，一段在后端运行的脚本，可使web app的离线使用、消息推送、后台自动更新等能力

    限制：
        1. 不能访问DOM
        2. 不能使用同步API
        3. 需要HTTPS协议

### 缓存实践
   
   利用浏览器缓存机制
      
      1. 对于不需要缓存的资源，可以使用Cache-control: no-store,表示资源不需要魂村
      2. 对于频繁变动的资源，可以使用 Cache-control: no-cache 并配合ETag 使用，每次都会通过请求判断资源是否更新
      3. 对于 代码文件 则通常使用 Cache-Control: max-age=31536000 并配合策略缓存使用，然后对文件进行指纹处理，一旦文件名变动就会立刻下载新的文件

   大公司静态资源优化方案
      
      1. 配置超长时间的本地缓存----节省带宽，提高性能
      2. 采用内容摘要作为缓存更新依据----精确的缓存控制
      3. 静态资源CDN部署----优化网络请求
      4. 资源发布路径实现非覆盖式发布----平滑升级
   
   静态资源文件通过Service Worker进行缓存控制和离线化加载


